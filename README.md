# lamoda_test
Тестовое задание для Lamoda Tech. Реализован API с помощью протокола JSON-RPC для работы с товарами на разных складах.

**Что можно делать (endpoints):**
1. Создавать товар, задавать имя, размер, уникальный код и общее количество товаров на складах (**Goods.Create**)
2. Создавать склад, задавать имя и доступность склада в текущий момент (**Warehouses.Add**)
3. Распределять товары по складам из общего источника (**Goods.Add**)
4. Резерировать некоторое количество товаров на складе, для доставки (**Goods.Reserve**)
5. Отменять резерв некоторого количества товаров (**Goods.CancelReservation**)
6. Узнавать количество доступных для резерва (доставки) товаров на конкретном складе (**Warehouses.GetAmount**)

**Для запуска можно использовать Makefile (make _команда из списка ниже_):**
1. _all_ - собирает бинарный файл из cmd/main.go, запускает контейнер с БД (должен быть предварительно создан) и запускает сервис
2. _run_ - запускает контейнер с БД (должен быть предварительно создан) и запускает сервис без сохранения собранного бинарника
3. _docker_ - удаляет в случае наличия существующий образ приложения, создает новый образ и запускает docker compose
4. _migration-up_ ARGS="_version_" - выполняет миграцию базы данных в докере указанной версии
5. _migration-down_ ARGS="_version_" - отменяет миграцию базы данных в докере указанной версии

Также в проекте предоставлен файл **my_own_postman.py** для тестирования функциональности приложения, 
вызова разных процедур с удобным вводом передаваемых данных

**База данных**
В качестве хранилища данных используется контейнер в docker с postres, который настраивается в файле docker-compose.yml

**В базе данных _lamoda_ созданы три таблицы для хранения информации о:**
1. Товарах (**goods**) - id товара, имя, размер, уникальный код и количество товаров, досутпное в общем источнике
2. Складах (**warehouses**) - id склада, имя и доступность склада
3. Информация о распределении товаров на складах (**warehouse_goods**) - id склада, code товара, количество доступных товаров и количество зарезервированных товаров
